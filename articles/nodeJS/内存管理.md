# 内存管理

    ➜  ~ node
    > process.memoryUsage()
    { rss: 22302720,
      heapTotal: 7684096,
      heapUsed: 5010816,
      external: 8804 }

堆内存：

* `heapTotal`为已申请的堆内存
* `heapUsed`当前使用量

## V8限制内存

默认情况，V8限制内存64位系统下约为1.4GB，32位系统下约为0.7GB。

可以通过命令行参数配置：

    node --max-old-space-size=1700 test.js // 单位为MB
    node --max-new-space-size=1024 test.js // 单位为KB

V8为什么限制内存：

* 表层原因：V8最初为浏览器设计，不太可能遇到用大量内存的场景。
* 深层原因：V8垃圾回收机制效率低。

## V8垃圾回收算法

分代垃圾回收机制，新生代